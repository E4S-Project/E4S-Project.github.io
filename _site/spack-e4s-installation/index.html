<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.3 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>E4S-specific Installation Using Spack - E4S - An HPC-AI Software Ecosystem for Science</title>
<meta name="description" content="Curated HPC-AI scientific libraries and tools for advanced scientific computing applications.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="E4S - An HPC-AI Software Ecosystem for Science">
<meta property="og:title" content="E4S-specific Installation Using Spack">
<meta property="og:url" content="http://localhost:4000/spack-e4s-installation/">


  <meta property="og:description" content="Curated HPC-AI scientific libraries and tools for advanced scientific computing applications.">



  <meta property="og:image" content="http://localhost:4000/assets/images/E4S-no-background.png">










<link rel="canonical" href="http://localhost:4000/spack-e4s-installation/">












<!-- end _includes/seo.html -->


<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3DB1WP6Q3G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-3DB1WP6Q3G');
</script>

<style>
td.details-control {
  background: url('/Resources/details_open.png') no-repeat center center;
  cursor: pointer;
}
tr.shown td.details-control {
  background: url('/Resources/details_close.png') no-repeat center center;
}
</style>

  </head>

  <body class="layout--single wide" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/E4S-no-background.png" alt="E4S - An HPC-AI Software Ecosystem for Science"></a>
        
        <a class="site-title" href="/">
          E4S - An HPC-AI Software Ecosystem for Science
          <span class="site-subtitle">Advancing Science through Trusted Software</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/use/"
                
                
              >Use E4S</a>
            </li><li class="masthead__menu-item">
              <a
                href="/join/"
                
                
              >Join E4S</a>
            </li><li class="masthead__menu-item">
              <a
                href="/about/"
                
                
              >About E4S</a>
            </li><li class="masthead__menu-item">
              <a
                href="/contact/"
                
                
              >Contact Us</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      
      
        <li>
          
            <span class="nav__sub-title">Use E4S</span>
          

          
          <ul>
            
              <li><a href="/use/">Overview</a></li>
            
              <li><a href="/guide-e4s-bot/">E4S Guide Bot</a></li>
            
              <li><a href="/documentation/">E4S Documentation</a></li>
            
              <li><a href="/product-catalog/">E4S Product Catalog</a></li>
            
              <li><a href="/spack-installation/">Finding and Installing with Spack</a></li>
            
              <li><a href="/spack-e4s-installation/" class="active">E4S-Specific Spack Installation</a></li>
            
              <li><a href="/container-download/">E4S Container Download</a></li>
            
              <li><a href="/container-installation/">E4S Container Installation</a></li>
            
              <li><a href="/container-launch/">E4S Container Launch</a></li>
            
              <li><a href="/test-with-e4s/">Test with E4S</a></li>
            
              <li><a href="https://www.paratoolspro.com">ParaTools Pro for E4S™</a></li>
            
          </ul>
          
        </li>
      
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="E4S-specific Installation Using Spack">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="http://localhost:4000/spack-e4s-installation/" itemprop="url">E4S-specific Installation Using Spack
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h2 id="manual-installation-instructions">Manual Installation Instructions</h2>

<p>The instructions on this page provide specific guidance for using Spack to install E4S.  See <a href="/use-spack-installation/">Finding and installing products using Spack</a> for general Spack instruction on how to install individual E4S-related products.</p>

<h3 id="instructions">Instructions</h3>

<p>Clone Spack, checkout the appropriate release branch, if desired, and source the Spack <code class="language-plaintext highlighter-rouge">setup-env.sh</code> script.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; git clone https://github.com/spack/spack
$&gt; (cd spack &amp;&amp; git checkout e4s-25.06)
$&gt; . spack/share/spack/setup-env.sh
</code></pre></div></div>

<p>Configure Spack to know where the E4S Build Cache is located. You can use either a release specific build cache, or the mixed build cache. The release specific build cache contains only binaries from the particular release, whereas the mixed build cache contains binaries from all releases and from in between releases.</p>

<p>Release-specific:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; spack mirror add E4S https://cache.e4s.io/25.06
$&gt; spack buildcache keys -it
</code></pre></div></div>

<p>Obtain a copy of the E4S Model Environment for the E4S release you are interested in, and rename it to <code class="language-plaintext highlighter-rouge">spack.yaml</code>, if needed. These are found in the <a href="https://github.com/E4S-Project/e4s/tree/master/environments">E4S Environment Repository</a>. For this example, we will use the <a href="https://github.com/E4S-Project/e4s/tree/master/environments/25.06/amd64-gcc-cuda-ubuntu22.04">E4S 25.06 Model Environment for X86_64 Systems with NVIDIA GPUs</a>.</p>

<p>Tweak the model environment so that it suits your needs: remove packages you aren’t interested in, select the correct GPU variants, specify the microarchitecture target and compiler selections, as needed. Once modified, you can concretize the environment, which you should do from the same directory that contains your environment.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; time spack -e . concretize -f | tee concretize.log
</code></pre></div></div>

<p>Start the install, specifying <code class="language-plaintext highlighter-rouge">-jN</code> where N reflects an appropriate degree of parallelism to use for the builds, as in <code class="language-plaintext highlighter-rouge">make -jN</code>.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; spack -e . install -jN
</code></pre></div></div>

<p>Build times can be quite a long time depending on the modifications you make to the environment and the capabilities of the machine you use for building. If you are using an E4S release branch of Spack, and using a minimally modified E4S release environment where the same compilers, operating system, and target architecture are retained, that will maximize your ability to pull pre-built packages from the build cache.</p>

<p>Please contact Sameer Shende at sameer [at] cs.uoregon.edu if you have any questions.</p>

<h3 id="references">References</h3>

<ul>
  <li><a href="https://spack.readthedocs.io/en/latest/">Spack General Documentation</a></li>
  <li><a href="https://spack.readthedocs.io/en/latest/environments.html">Spack Environments Documentation</a></li>
  <li><a href="https://spack.readthedocs.io/en/latest/binary_caches.html">Spack Build Cache Documentation</a></li>
  <li><a href="https://github.com/E4S-Project/e4s">E4S Model Environment Repository</a></li>
  <li><a href="https://github.com/E4S-Project/e4s/tree/master/environments/25.06">E4S 25.06 Model Environments</a></li>
  <li><a href="https://e4s.io">E4S Homepage</a></li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        


        

      </footer>

      

      

    </div>

    
  </article>

  
  
</div>

      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <footer class="site-footer" style="text-align:center; font-size:0.85em; margin-top:2em;">
  © 2025 E4S Project, a Series of LF Projects, LLC.  For website terms of use, trademark policy and other project policies please see
  <a href="https://lfprojects.org" target="_blank" rel="noopener">lfprojects.org</a>. Supported by the U.S. Department of Energy Office of Advanced Scientific Computing Research.
</footer>
      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>









  </body>
</html>
